<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
</head>    
<script src="./vendors/jquery-2.1.0.min.js"></script>
<script src="./vendors/underscore-min.js"></script>
<script src="./vendors/gh3.js"></script>    

<script type="text/javascript">
var user;
var user_repos;
var repos;
$(document).ready(function(){
	$("#login").click(function(){
		var email = $("#email").val();
		var password = $("#password").val();
		// Checking for blank fields.
		if( email =='' || password ==''){
			$('input[type="text"],input[type="password"]').css("border","2px solid red");
			$('input[type="text"],input[type="password"]').css("box-shadow","0 0 3px red");
			alert("Please fill all fields...!!!!!!");
		}else {
			user = new Gh3.User(email);
			
			user.fetch(function (err, resUser){

				if(err) {
					throw "outch ..."
				}

				//console.log("Blog : ", resUser.blog); // == k33g.blog
				console.log("Name : ", resUser.name);
				$(".content_row").append("<p>" + resUser.name + "</p>");
				jQuery(".content_row").append("<p>"+resUser.repos+"</p>");
				//etc. ...
				}
			);
			//get some repositories of k33g
			user_repos = new Gh3.Repositories(user);
			var pagination = {page: 1, per_page : 10 , direction : "desc"};
			
			user_repos.fetch(
				pagination,
				"next", 
				function (err, res) {
					if(err) {
						throw "outch ..."
					}
					console.log("Repositories", res);
					// adds div for selector
					$(".content_row").append("<div class=\"repos\"></div>");
					//adds selector with repositorie
					$(".repos").append("<select id=\"repos_selector\"></select>");
					// fill selector
					res.repositories.forEach(fillOptions)
				}
			);
			
			//repos = user_repos.getRepositories();
			
			
		}
	});
});

var fillOptions = function(el) {
	$(".repos_selector").append("<option value=\""+ el.name +"\">"+el.name+"</option>");
} 
</script>

<body>
<h1>Project Dashboard</h1>

<div class="container">
<div class="main">
<form class="form" method="post" action="#">

<label>Github user :</label>
<input type="text" name="demail" id="email">
<label>Password :</label>
<input type="password" name="password" id="password">
<input type="button" name="login" id="login" value="Login">
</form>
</div>
</div>
<div class="content_row">
<div>
</body>
</html>